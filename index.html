<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waitlist</title>
    <style>
        /* --- Global Styles & Layout --- */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevents scrollbars when the button moves */
        }

        body {
            background-color: #000000; /* Black background for DOS theme */
            color: white;
            font-family: 'Courier New', Courier, monospace; /* Standard monospace font */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* --- Content Containers --- */
        #main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #lockout-content {
            display: none; /* Initially hidden */
        }

        /* --- Page Elements --- */
        #clock-image {
            width: 200px;
            margin-bottom: 25px;
        }
        
        /* --- Typewriter Text Styling --- */
        .typewriter-text {
            font-size: 1.5em;
            /* Reserve space to prevent page jumping as text appears */
            min-height: 1.5em; 
        }
        
        /* Blinking cursor effect for typewriter */
        .typewriter-text::after {
            content: '_';
            opacity: 1;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { 
                opacity: 1; 
            }
            50% { 
                opacity: 0; 
            }
        }

        /* --- Interactive Button --- */
        #join-button {
            background-color: transparent;
            border: 2px solid white;
            color: white;
            padding: 12px 24px;
            font-family: inherit;
            font-size: 1em;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.2s ease;
            display: none; /* Hidden until initial text types out */
        }

        #join-button:hover {
            background-color: white;
            color: black;
        }

    </style>
</head>
<body>

    <div id="main-content">
        <img src="https://i.ibb.co/TqkgQZYM/clock.jpg" alt="Clock" id="clock-image">
        <p id="welcome-text" class="typewriter-text"></p>
        <button id="join-button">join waitlist</button>
    </div>

    <div id="lockout-content">
        <p id="lockout-text" class="typewriter-text"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DOM ELEMENTS ---
            const mainContent = document.getElementById('main-content');
            const welcomeTextEl = document.getElementById('welcome-text');
            const joinButton = document.getElementById('join-button');
            const lockoutContent = document.getElementById('lockout-content');
            const lockoutTextEl = document.getElementById('lockout-text');

            // --- STATE ---
            let clickCount = 0;

            /**
             * Creates a typewriter effect for a given text on an element.
             * @param {HTMLElement} element - The HTML element to display the text in.
             * @param {string} text - The text to type out.
             * @param {number} [speed=100] - The typing speed in milliseconds.
             * @param {function} [onComplete=()=>{}] - A callback function to run when typing is done.
             */
            function typewriter(element, text, speed = 100, onComplete = () => {}) {
                element.innerHTML = ''; 
                let i = 0;
                const interval = setInterval(() => {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(interval);
                        // Hide cursor after typing is complete
                        element.classList.remove('typewriter-text');
                        element.style.borderRight = 'none';
                        onComplete();
                    }
                }, speed);
            }

            /**
             * Starts the countdown timer and updates the lockout message.
             * @param {number} seconds - The number of seconds to count down from.
             */
            function startCountdown(seconds) {
                let timer = seconds;
                const baseText = 'You are locked out of waitlist for ';
                
                const countdownInterval = setInterval(() => {
                    // Directly update the text without the typewriter effect
                    lockoutTextEl.innerHTML = `${baseText}${timer} seconds`;
                    timer--;

                    if (timer < 0) {
                        clearInterval(countdownInterval);
                        location.reload(); // Refresh the page when the timer hits 0
                    }
                }, 1000);
            }

            /**
             * Moves the "join waitlist" button to a random position on the screen.
             */
            function moveButton() {
                // Change button to absolute positioning to allow it to move freely
                if (clickCount === 1) {
                    joinButton.style.position = 'absolute';
                }
            
                const vw = window.innerWidth;
                const vh = window.innerHeight;
                const buttonWidth = joinButton.offsetWidth;
                const buttonHeight = joinButton.offsetHeight;

                // Calculate a random top/left position within the viewport
                const newX = Math.floor(Math.random() * (vw - buttonWidth));
                const newY = Math.floor(Math.random() * (vh - buttonHeight));

                joinButton.style.left = `${newX}px`;
                joinButton.style.top = `${newY}px`;
            }

            // --- EVENT LISTENER FOR THE BUTTON ---
            joinButton.addEventListener('click', () => {
                clickCount++;
                
                switch (clickCount) {
                    case 1: // First click
                    case 2: // Second click
                        moveButton();
                        break;
                    case 3: // Third click
                        // Hide the initial content
                        mainContent.style.display = 'none';
                        
                        // Show the lockout message container
                        lockoutContent.style.display = 'block';
                        
                        // Start the final lockout sequence
                        const lockoutMessage = 'You are locked out of waitlist for 900 seconds';
                        typewriter(lockoutTextEl, lockoutMessage, 75, () => {
                            // After the message types out, start the countdown
                            startCountdown(900);
                        });
                        break;
                }
            });

            // --- INITIALIZE THE PAGE ---
            const welcomeMessage = 'welcome to waitlist.';
            typewriter(welcomeTextEl, welcomeMessage, 150, () => {
                // Show the button only after the welcome message has finished typing
                joinButton.style.display = 'inline-block';
            });
        });
    </script>

</body>
</html>
